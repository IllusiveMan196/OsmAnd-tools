<?xml version="1.0" encoding="utf-8"?>
<batch_process>
	<!-- not supported yet for AWS -->
	<process_attributes mapZooms="" renderingTypesFile="" zoomWaySmoothness="2" 
		osmDbDialect="sqlite_in_memory" mapDbDialect="sqlite_in_memory"/>

	 <process directory_for_osm_files=".work/osm" directory_for_index_files="/var/lib/jenkins/indexes" directory_for_generation=".work"
		skipExistingIndexesAt="/var/lib/jenkins/indexes/uploaded"	
		indexPOI="true" indexMap="true" indexRouting="true" indexTransport="true" indexAddress="true" 
		directory_for_srtm_files="/home/relief-data/srtm/">
		
		<external>
			<job queue="gen-map-queue-fargate" definition="gen-map-fargate-small" name="{1}-{0}" sizeUpToMB="60" type="aws">
				<parameter k="upload" v="s3://osmand-maps-gen/{1}/{0}_2.obf" />
				<parameter k="map" v="https://creator.osmand.net/osm-extract/{0}/{0}.pbf"/>
				<filter excludePattern="_africa" />
				<filter excludePattern="_asia" />
				<filter excludePattern="_southamerica" />
				<filter excludePattern="_centralamerica" />
				<filter excludePattern="_australia-oceania" />
			</job>
			<job queue="gen-map-queue-fargate" definition="gen-map-fargate-large" name="{1}-{0}" sizeUpToMB="900" type="aws">
				<parameter k="upload" v="s3://osmand-maps-gen/{1}/{0}_2.obf" />
				<parameter k="map" v="https://creator.osmand.net/osm-extract/{0}/{0}.pbf"/>
				<filter exclude="world_seamarks" />
                <filter exclude="nigeria_africa" />
				<filter exclude="us_florida_northamerica" />
				<filter exclude="congo-democratic-republic_africa" />
				<filter exclude="south-africa_africa" />
                <filter exclude="kazakhstan_asia" />
                <filter exclude="mongolia_asia" />
				<filter excludePattern="_africa" />
				<filter excludePattern="_asia" />
				<filter excludePattern="_southamerica" />
				<filter excludePattern="_centralamerica" />
				<filter excludePattern="_australia-oceania" />
			</job>
			<job queue="gen-docker-small" threads="3" name="{1}-{0}" sizeUpToMB="100" type="docker">
				<parameter k="image" v="osmandapp/osmand-mapcreator" />
				<parameter k="cmd" v="generate-obf" />
				<parameter k="cmd" v="https://creator.osmand.net/osm-extract/{0}/{0}.pbf" />

				<parameter k="env" v="JAVA_OPTS=-Xms2048M -Xmx16096M"/>
			</job>
			<job queue="gen-docker-large" threads="1" name="{1}-{0}" sizeUpToMB="900" type="docker">
				<parameter k="image" v="osmandapp/osmand-mapcreator" />
				<parameter k="cmd" v="generate-obf" />
				<parameter k="cmd" v="https://creator.osmand.net/osm-extract/{0}/{0}.pbf" />
				
				<parameter k="env" v="JAVA_OPTS=-Xms2048M -Xmx32000M "/>
			</job>
		</external>
	</process>
	
	<regions siteToDownload="/home/osm-planet/osm-extract/{0}/{0}.pbf" >
		<regionList url="https://raw.githubusercontent.com/osmandapp/OsmAnd-resources/master/countries-info/regions.xml"
				/>
	</regions>

</batch_process> 
